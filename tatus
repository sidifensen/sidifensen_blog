warning: in the working copy of '.cursor/rules/frontend.mdc', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/.cursor/rules/frontend.mdc b/.cursor/rules/frontend.mdc[m
[1mindex bb0d685..a8c09c7 100644[m
[1m--- a/.cursor/rules/frontend.mdc[m
[1m+++ b/.cursor/rules/frontend.mdc[m
[36m@@ -49,6 +49,7 @@[m [msrc/[m
 - 事件名使用 kebab-case[m
 - 组件标签使用 PascalCase[m
 - **⚠️ 重要：确保所有 HTML 标签都正确闭合，避免未闭合标签导致的页面渲染问题和布局错乱**[m
[32m+[m[32m- **🚫 禁止导入 Element Plus 消息组件：不要在每个 Vue 文件中导入 `import { ElMessage, ElMessageBox } from "element-plus"`，这会导致样式不生效。这些组件已经全局注册，可以直接使用**[m
 [m
 ### 3. Composition API 规范[m
 [m
[36m@@ -57,7 +58,7 @@[m [msrc/[m
 // 1. 导入依赖 - 按照功能分组[m
 import { ref, reactive, computed, onMounted, watch } from "vue";[m
 import { useRoute, useRouter } from "vue-router";[m
[31m-import { ElMessage } from "element-plus";[m
[32m+[m[32m// 注意：ElMessage 已全局注册，无需导入[m
 import { Plus, Message, Trophy, View } from "@element-plus/icons-vue";[m
 import { getUserInfoById } from "@/api/user";[m
 import { getUserArticleList, getUserArticleStatisticsById } from "@/api/article";[m
[36m@@ -790,19 +791,47 @@[m [mconst fetchArticleList = async (reset = false) => {[m
 [m
 ### 2. 消息提示[m
 [m
[32m+[m[32m- **⚠️ 重要警告：禁止在每个 Vue 文件中单独导入 `import { ElMessage, ElMessageBox } from "element-plus"`，这会导致样式不生效**[m
[32m+[m[32m- **✅ 正确做法：Element Plus 的消息提示组件已经在全局注册，可以直接使用，无需导入**[m
[32m+[m
 ```javascript[m
[32m+[m[32m// ❌ 错误做法 - 禁止在组件中导入[m
 import { ElMessage, ElMessageBox } from "element-plus";[m
 [m
[32m+[m[32m// ✅ 正确做法 - 直接使用全局注册的组件[m
 // 成功提示[m
 ElMessage.success("操作成功");[m
 [m
[32m+[m[32m// 错误提示[m
[32m+[m[32mElMessage.error("操作失败");[m
[32m+[m
[32m+[m[32m// 警告提示[m
[32m+[m[32mElMessage.warning("请注意");[m
[32m+[m
[32m+[m[32m// 信息提示[m
[32m+[m[32mElMessage.info("提示信息");[m
[32m+[m
 // 确认对话框[m
 ElMessageBox.confirm("确定要删除吗？", "提示", {[m
   confirmButtonText: "确定",[m
   cancelButtonText: "取消",[m
   type: "warning",[m
[31m-}).then(() => {[m
[31m-  // 确认操作[m
[32m+[m[32m})[m
[32m+[m[32m  .then(() => {[m
[32m+[m[32m    // 确认操作[m
[32m+[m[32m  })[m
[32m+[m[32m  .catch(() => {[m
[32m+[m[32m    // 取消操作[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m// 输入对话框[m
[32m+[m[32mElMessageBox.prompt("请输入邮箱", "提示", {[m
[32m+[m[32m  confirmButtonText: "确定",[m
[32m+[m[32m  cancelButtonText: "取消",[m
[32m+[m[32m  inputPattern: /[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,[m
[32m+[m[32m  inputErrorMessage: "邮箱格式不正确",[m
[32m+[m[32m}).then(({ value }) => {[m
[32m+[m[32m  // 处理输入值[m
 });[m
 ```[m
 [m
[36m@@ -948,7 +977,6 @@[m [mElMessageBox.confirm("确定要删除吗？", "提示", {[m
 <script setup>[m
 import { ref, reactive, computed, onMounted, watch } from "vue";[m
 import { useRoute, useRouter } from "vue-router";[m
[31m-import { ElMessage } from "element-plus";[m
 import { Plus, Message, Trophy, View, Picture } from "@element-plus/icons-vue";[m
 import { getUserInfoById } from "@/api/user";[m
 import { getUserArticleList, getUserArticleStatisticsById } from "@/api/article";[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/ArticleController.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/ArticleController.java[m
[1mindex f7353a8..9dcb42c 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/ArticleController.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/ArticleController.java[m
[36m@@ -261,4 +261,16 @@[m [mpublic class ArticleController {[m
         return Result.success();[m
     }[m
 [m
[32m+[m[32m    /**[m
[32m+[m[32m     * 管理员获取文章统计数据[m
[32m+[m[32m     *[m
[32m+[m[32m     * @return 文章统计数据[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("hasAuthority('article:list')")[m
[32m+[m[32m    @GetMapping("/admin/statistics")[m
[32m+[m[32m    public Result getAdminStatistics() {[m
[32m+[m[32m        ArticleStatisticsVo statisticsVo = articleService.getAdminStatistics();[m
[32m+[m[32m        return Result.success(statisticsVo);[m
[32m+[m[32m    }[m
[32m+[m
 }[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/CommentController.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/CommentController.java[m
[1mindex 42929b9..c7333ef 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/CommentController.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/CommentController.java[m
[36m@@ -171,4 +171,16 @@[m [mpublic class CommentController {[m
         return Result.success();[m
     }[m
 [m
[32m+[m[32m    /**[m
[32m+[m[32m     * 管理员获取评论总数统计[m
[32m+[m[32m     *[m
[32m+[m[32m     * @return 评论总数[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("hasAuthority('comment:list')")[m
[32m+[m[32m    @GetMapping("/admin/statistics")[m
[32m+[m[32m    public Result<Long> getCommentStatistics() {[m
[32m+[m[32m        Long totalCount = commentService.getCommentTotalCount();[m
[32m+[m[32m        return Result.success(totalCount);[m
[32m+[m[32m    }[m
[32m+[m
 }[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/FavoriteArticleController.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/FavoriteArticleController.java[m
[1mdeleted file mode 100644[m
[1mindex eb985f6..0000000[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/FavoriteArticleController.java[m
[1m+++ /dev/null[m
[36m@@ -1,15 +0,0 @@[m
[31m-package com.sidifensen.controller;[m
[31m-[m
[31m-[m
[31m-import org.springframework.web.bind.annotation.RequestMapping;[m
[31m-import org.springframework.web.bind.annotation.RestController;[m
[31m-[m
[31m-/**[m
[31m- * @author sidifensen[m
[31m- * @since 2025-09-16[m
[31m- */[m
[31m-@RestController[m
[31m-@RequestMapping("/favorite-article")[m
[31m-public class FavoriteArticleController {[m
[31m-[m
[31m-}[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/SysUserController.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/SysUserController.java[m
[1mindex 08ad073..31d234f 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/SysUserController.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/SysUserController.java[m
[36m@@ -5,6 +5,7 @@[m [mimport com.sidifensen.domain.result.Result;[m
 import com.sidifensen.domain.vo.SysUserDetailVo;[m
 import com.sidifensen.domain.vo.SysUserVo;[m
 import com.sidifensen.domain.vo.SysUserWithArticleCountVo;[m
[32m+[m[32mimport com.sidifensen.domain.vo.SysUserWithCommentCountVo;[m
 import com.sidifensen.redis.RedisComponent;[m
 import com.sidifensen.service.SysUserService;[m
 import com.wf.captcha.ArithmeticCaptcha;[m
[36m@@ -183,6 +184,18 @@[m [mpublic class SysUserController {[m
         return Result.success(sysUserVos);[m
     }[m
 [m
[32m+[m[32m    /**[m
[32m+[m[32m     * 管理端获取用户列表（包含评论数量）[m
[32m+[m[32m     *[m
[32m+[m[32m     * @return[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("hasAuthority('system:user:list')")[m
[32m+[m[32m    @GetMapping("/admin/listWithCommentCount")[m
[32m+[m[32m    public Result listUserWithCommentCount() {[m
[32m+[m[32m        List<SysUserWithCommentCountVo> sysUserVos = sysUserService.listUserWithCommentCount();[m
[32m+[m[32m        return Result.success(sysUserVos);[m
[32m+[m[32m    }[m
[32m+[m
     /**[m
      * 管理端修改用户[m
      *[m
[36m@@ -229,4 +242,16 @@[m [mpublic class SysUserController {[m
         return Result.success(sysUserDetailVo);[m
     }[m
 [m
[32m+[m[32m    /**[m
[32m+[m[32m     * 管理端获取用户总数统计[m
[32m+[m[32m     *[m
[32m+[m[32m     * @return 用户总数[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("hasAuthority('system:user:list')")[m
[32m+[m[32m    @GetMapping("/admin/count")[m
[32m+[m[32m    public Result getUserTotalCount() {[m
[32m+[m[32m        Long totalCount = sysUserService.getUserTotalCount();[m
[32m+[m[32m        return Result.success(totalCount);[m
[32m+[m[32m    }[m
[32m+[m
 }[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/TagController.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/TagController.java[m
[1mindex 4f876bf..e5293cf 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/TagController.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/controller/TagController.java[m
[36m@@ -5,6 +5,7 @@[m [mimport com.sidifensen.domain.dto.TagDto;[m
 import com.sidifensen.domain.result.Result;[m
 import com.sidifensen.service.TagService;[m
 import jakarta.annotation.Resource;[m
[32m+[m[32mimport org.springframework.security.access.prepost.PreAuthorize;[m
 import org.springframework.web.bind.annotation.*;[m
 [m
 import java.util.List;[m
[36m@@ -25,6 +26,7 @@[m [mpublic class TagController {[m
     /**[m
      * 新增标签[m
      */[m
[32m+[m[32m    @PreAuthorize("hasAuthority('tag:add')")[m
     @PostMapping("/add")[m
     public Result addTag(@RequestBody TagDto tagDto) {[m
         tagService.addTag(tagDto);[m
[36m@@ -43,9 +45,10 @@[m [mpublic class TagController {[m
     /**[m
      * 删除标签[m
      */[m
[32m+[m[32m    @PreAuthorize("hasAuthority('tag:delete')")[m
     @DeleteMapping("/delete")[m
     public Result deleteTag(@RequestParam Integer id) {[m
[31m-        tagService.removeById(id);[m
[32m+[m[32m        tagService.deleteTag(id);[m
         return Result.success();[m
     }[m
 [m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/constants/BlogConstants.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/constants/BlogConstants.java[m
[1mindex ef122a8..283f354 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/constants/BlogConstants.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/constants/BlogConstants.java[m
[36m@@ -40,6 +40,7 @@[m [mpublic class BlogConstants {[m
     public static final String DeleteMessageError = "消息删除失败";[m
 [m
     public static final String AddTagError = "添加标签失败";[m
[32m+[m[32m    public static final String DeleteTagError = "删除标签失败";[m
     public static final String AddArticleError = "添加文章失败";[m
     public static final String DeleteArticleError = "删除文章失败";[m
     public static final String CannotHandleOthersArticle = "不能操作别人的文章";[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/dto/CommentSearchDto.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/dto/CommentSearchDto.java[m
[1mindex dc5001e..1aef052 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/dto/CommentSearchDto.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/dto/CommentSearchDto.java[m
[36m@@ -7,6 +7,7 @@[m [mimport lombok.EqualsAndHashCode;[m
 import lombok.experimental.Accessors;[m
 [m
 import java.io.Serializable;[m
[32m+[m[32mimport java.util.Date;[m
 [m
 /**[m
  * 评论搜索数据传输对象[m
[36m@@ -45,4 +46,14 @@[m [mpublic class CommentSearchDto implements Serializable {[m
      */[m
     private String keyword;[m
 [m
[32m+[m[32m    /**[m
[32m+[m[32m     * 创建时间开始（用于搜索）[m
[32m+[m[32m     */[m
[32m+[m[32m    private Date createTimeStart;[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * 创建时间结束（用于搜索）[m
[32m+[m[32m     */[m
[32m+[m[32m    private Date createTimeEnd;[m
[32m+[m
 }[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/entity/FavoriteArticle.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/entity/FavoriteArticle.java[m
[1mdeleted file mode 100644[m
[1mindex d500cf3..0000000[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/domain/entity/FavoriteArticle.java[m
[1m+++ /dev/null[m
[36m@@ -1,55 +0,0 @@[m
[31m-package com.sidifensen.domain.entity;[m
[31m-[m
[31m-import com.baomidou.mybatisplus.annotation.TableName;[m
[31m-import com.baomidou.mybatisplus.annotation.IdType;[m
[31m-import com.baomidou.mybatisplus.annotation.TableId;[m
[31m-import java.time.LocalDateTime;[m
[31m-import java.io.Serializable;[m
[31m-import lombok.Data;[m
[31m-import lombok.EqualsAndHashCode;[m
[31m-import lombok.experimental.Accessors;[m
[31m-[m
[31m-/**[m
[31m- * <p>[m
[31m- * [m
[31m- * </p>[m
[31m- *[m
[31m- * @author sidifensen[m
[31m- * @since 2025-09-16[m
[31m- */[m
[31m-@Data[m
[31m-@EqualsAndHashCode(callSuper = false)[m
[31m-@Accessors(chain = true)[m
[31m-@TableName("favorite_article")[m
[31m-public class FavoriteArticle implements Serializable {[m
[31m-[m
[31m-    private static final long serialVersionUID = 1L;[m
[31m-[m
[31m-    /**[m
[31m-     * 主键id[m
[31m-     */[m
[31m-    @TableId(value = "id", type = IdType.AUTO)[m
[31m-    private Integer id;[m
[31m-[m
[31m-    /**[m
[31m-     * 收藏夹id[m
[31m-     */[m
[31m-    private Integer favoriteId;[m
[31m-[m
[31m-    /**[m
[31m-     * 被收藏的文章id[m
[31m-     */[m
[31m-    private Integer articleId;[m
[31m-[m
[31m-    /**[m
[31m-     * 创建时间[m
[31m-     */[m
[31m-    private LocalDateTime createTime;[m
[31m-[m
[31m-    /**[m
[31m-     * 是否删除 0-未删除 1-已删除[m
[31m-     */[m
[31m-    private Integer isDeleted;[m
[31m-[m
[31m-[m
[31m-}[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/mapper/FavoriteArticleMapper.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/mapper/FavoriteArticleMapper.java[m
[1mdeleted file mode 100644[m
[1mindex e91ec6f..0000000[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/mapper/FavoriteArticleMapper.java[m
[1m+++ /dev/null[m
[36m@@ -1,12 +0,0 @@[m
[31m-package com.sidifensen.mapper;[m
[31m-[m
[31m-import com.baomidou.mybatisplus.core.mapper.BaseMapper;[m
[31m-import com.sidifensen.domain.entity.FavoriteArticle;[m
[31m-[m
[31m-/**[m
[31m- * @author sidifensen[m
[31m- * @since 2025-09-16[m
[31m- */[m
[31m-public interface FavoriteArticleMapper extends BaseMapper<FavoriteArticle> {[m
[31m-[m
[31m-}[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/service/ArticleService.java b/sidifensen_blog_backend/src/main/java/com/sidifensen/service/ArticleService.java[m
[1mindex f9d4ee0..8159094 100644[m
[1m--- a/sidifensen_blog_backend/src/main/java/com/sidifensen/service/ArticleService.java[m
[1m+++ b/sidifensen_blog_backend/src/main/java/com/sidifensen/service/ArticleService.java[m
[36m@@ -80,4 +80,7 @@[m [mpublic interface ArticleService extends IService<Article> {[m
 [m
     // 管理员批量删除文章[m
     void adminDeleteBatchArticle(List<Integer> articleIds);[m
[32m+[m
[32m+[m[32m    // 管理员获取文章统计数据[m
[32m+[m[32m    ArticleStatisticsVo getAdminStatistics();[m
 }[m
[1mdiff --git a/sidifensen_blog_backend/src/main/java/com/sidifensen/service/CommentService.java b/sidifensen_blog_backend/src/main/j