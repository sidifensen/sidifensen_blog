---
alwaysApply: true
---

# Java Spring Boot MVC é¡¹ç›®è§„åˆ™

## é¡¹ç›®æ¶æ„

- åŸºäº Spring Boot 3.1.4 + Java 21 çš„ MVC æ¶æ„
- ä½¿ç”¨ MyBatis-Plus ä½œä¸º ORM æ¡†æ¶
- é‡‡ç”¨ RESTful API è®¾è®¡é£æ ¼
- åŒ…ç»“æ„éµå¾ªæ ‡å‡† MVC åˆ†å±‚æ¶æ„
- **ğŸ”§ é¡¹ç›®å¯åŠ¨ï¼šä¸éœ€è¦ Cursor å¸®åŠ©é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œå¼€å‘è€…ä¼šæ‰‹åŠ¨é‡æ–°å¯åŠ¨é¡¹ç›®**

## åŒ…ç»“æ„è§„èŒƒ

```
com.sidifensen/
â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚
â”œâ”€â”€ service/            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ impl/          # ä¸šåŠ¡é€»è¾‘å®ç°
â”œâ”€â”€ mapper/            # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ domain/            # é¢†åŸŸæ¨¡å‹
â”‚   â”œâ”€â”€ entity/        # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/          # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ vo/           # è§†å›¾å¯¹è±¡
â”‚   â”œâ”€â”€ result/       # ç»“æœå°è£…
â”‚   â”œâ”€â”€ enums/        # æšä¸¾ç±»
â”‚   â””â”€â”€ constants/    # å¸¸é‡ç±»
â”œâ”€â”€ config/           # é…ç½®ç±»
â”œâ”€â”€ utils/           # å·¥å…·ç±»
â””â”€â”€ exception/       # å¼‚å¸¸å¤„ç†
```

## ç¼–ç è§„èŒƒ

### 1. ç±»å‘½åè§„èŒƒ

- Controller: `XxxController`
- Service æ¥å£: `XxxService`
- Service å®ç°: `XxxServiceImpl`
- Entity: ä½¿ç”¨ä¸šåŠ¡åç§°ï¼Œå¦‚ `Article`, `User`
- DTO: `XxxDto`
- VO: `XxxVo`
- Mapper: `XxxMapper`

### 2. æ³¨è§£ä½¿ç”¨è§„èŒƒ

- Controller ç±»å¿…é¡»ä½¿ç”¨ `@RestController`
- Service å®ç°ç±»ä½¿ç”¨ `@Service`
- ä¾èµ–æ³¨å…¥ä½¿ç”¨ `@Resource` è€Œé `@Autowired`
- æ—¥å¿—ä½¿ç”¨ `@Slf4j`
- å®ä½“ç±»ä½¿ç”¨ `@Data`, `@EqualsAndHashCode(callSuper = false)`, `@Accessors(chain = true)`

### 3. Controller å±‚è§„èŒƒ

- ä½¿ç”¨ `@RequestMapping` å®šä¹‰åŸºç¡€è·¯å¾„
- HTTP æ–¹æ³•æ˜ å°„ï¼š
  - GET: `@GetMapping`
  - POST: `@PostMapping`
  - PUT: `@PutMapping`
  - DELETE: `@DeleteMapping`
- å‚æ•°æ ¡éªŒä½¿ç”¨ `@NotNull`, `@Valid` ç­‰æ³¨è§£
- æƒé™æ§åˆ¶ä½¿ç”¨ `@PreAuthorize`
- ç»Ÿä¸€è¿”å› `Result` å¯¹è±¡

### 4. Service å±‚è§„èŒƒ

- ç»§æ‰¿ `ServiceImpl<XxxMapper, XxxEntity>` å¹¶å®ç° `XxxService`
- ä¸šåŠ¡å¼‚å¸¸æŠ›å‡º `BlogException`
- å¤æ‚æŸ¥è¯¢ä½¿ç”¨ `LambdaQueryWrapper`
- åˆ†é¡µä½¿ç”¨ `Page<T>` å’Œ `PageVo<T>`

### 5. Entity è§„èŒƒ

- å¿…é¡»ä½¿ç”¨ `@Data` æ³¨è§£ï¼ˆè‡ªåŠ¨ç”Ÿæˆ getter/setter/toString/equals/hashCodeï¼‰
- ä½¿ç”¨ MyBatis-Plus æ³¨è§£ï¼š
  - `@TableName` æŒ‡å®šè¡¨å
  - `@TableId(type = IdType.AUTO)` ä¸»é”®è‡ªå¢
  - `@TableField(fill = FieldFill.INSERT)` åˆ›å»ºæ—¶é—´
  - `@TableField(fill = FieldFill.INSERT_UPDATE)` æ›´æ–°æ—¶é—´
  - `@TableLogic` é€»è¾‘åˆ é™¤
- å­—æ®µæ ¡éªŒä½¿ç”¨ `@Min`, `@Max` ç­‰æ³¨è§£

### 6. å¼‚å¸¸å¤„ç†è§„èŒƒ

- ç»Ÿä¸€å¼‚å¸¸å¤„ç†ä½¿ç”¨ `@RestControllerAdvice`
- ä¸šåŠ¡å¼‚å¸¸ä½¿ç”¨è‡ªå®šä¹‰ `BlogException`
- å¼‚å¸¸ä¿¡æ¯å®šä¹‰åœ¨å¸¸é‡ç±»ä¸­

### 7. å·¥å…·ç±»è§„èŒƒ

- å®‰å…¨å·¥å…·ç±»: `SecurityUtils`
- å¯¹è±¡è½¬æ¢ä½¿ç”¨ `BeanUtil.copyProperties`
- ç©ºå€¼åˆ¤æ–­ä½¿ç”¨ `ObjectUtil.isEmpty/isNotEmpty`
- æ—¥æœŸå¤„ç†ä½¿ç”¨ `DateUtil`

### 8. æ•°æ®åº“æ“ä½œè§„èŒƒ

- ä½¿ç”¨ MyBatis-Plus çš„ Lambda è¡¨è¾¾å¼
- æ‰¹é‡æ“ä½œä¼˜å…ˆä½¿ç”¨ MyBatis-Plus æä¾›çš„æ–¹æ³•
- å¤æ‚æŸ¥è¯¢å†™åœ¨ Mapper XML ä¸­
- é¿å… N+1 æŸ¥è¯¢é—®é¢˜

### 9. é…ç½®è§„èŒƒ

- å¤šç¯å¢ƒé…ç½®: `application-{profile}.yaml`
- è‡ªå®šä¹‰é…ç½®ç±»ä½¿ç”¨ `@ConfigurationProperties`
- æ•æ„Ÿä¿¡æ¯ä¸è¦ç¡¬ç¼–ç 

### 10. æ—¥å¿—è§„èŒƒ

- ä½¿ç”¨ `@Slf4j` æ³¨è§£
- å…³é”®ä¸šåŠ¡æ“ä½œè®°å½•æ—¥å¿—
- å¼‚å¸¸å¿…é¡»è®°å½•æ—¥å¿—
- æ—¥å¿—çº§åˆ«åˆç†ä½¿ç”¨

## ä»£ç ç¤ºä¾‹

### Controller ç¤ºä¾‹

```java
@RestController
@RequestMapping("/article")
public class ArticleController {

    @Resource
    private ArticleService articleService;

    @GetMapping("/list")
    public Result getArticleList(@NotNull Integer pageNum, @NotNull Integer pageSize) {
        PageVo<List<ArticleVo>> result = articleService.getArticleList(pageNum, pageSize);
        return Result.success(result);
    }

    @PreAuthorize("hasAuthority('article:delete')")
    @DeleteMapping("/admin/{articleId}")
    public Result adminDeleteArticle(@PathVariable Integer articleId) {
        articleService.adminDeleteArticle(articleId);
        return Result.success();
    }
}
```

### Service ç¤ºä¾‹

```java
@Service
@Slf4j
public class ArticleServiceImpl extends ServiceImpl<ArticleMapper, Article> implements ArticleService {

    @Resource
    private ArticleMapper articleMapper;

    @Override
    public PageVo<List<ArticleVo>> getArticleList(Integer pageNum, Integer pageSize) {
        Page<Article> page = new Page<>(pageNum, pageSize);
        LambdaQueryWrapper<Article> qw = new LambdaQueryWrapper<Article>()
                .eq(Article::getExamineStatus, ExamineStatusEnum.PASS.getCode())
                .orderByDesc(Article::getCreateTime);

        List<Article> articles = articleMapper.selectPage(page, qw).getRecords();
        List<ArticleVo> articleVos = BeanUtil.copyToList(articles, ArticleVo.class);

        return new PageVo<>(articleVos, page.getTotal());
    }
}
```

### Entity ç¤ºä¾‹

```java
@Data
@EqualsAndHashCode(callSuper = false)
@Accessors(chain = true)
@TableName("article")
public class Article implements Serializable {

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    private String title;

    @Min(value = 0, message = "å®¡æ ¸çŠ¶æ€é”™è¯¯")
    @Max(value = 2, message = "å®¡æ ¸çŠ¶æ€é”™è¯¯")
    private Integer examineStatus;

    @TableField(fill = FieldFill.INSERT)
    private Date createTime;

    @TableField(fill = FieldFill.INSERT_UPDATE)
    private Date updateTime;

    @TableLogic
    private Integer isDeleted;
}
```

## æœ€ä½³å®è·µ

1. éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. ä½¿ç”¨åˆé€‚çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚ç­–ç•¥æ¨¡å¼å¤„ç†ä¸åŒä¸šåŠ¡é€»è¾‘
3. ä»£ç è¦æœ‰é€‚å½“çš„æ³¨é‡Šï¼Œç‰¹åˆ«æ˜¯ä¸šåŠ¡é€»è¾‘å¤æ‚çš„åœ°æ–¹
4. åŠæ—¶å¤„ç† TODO å’Œ FIXME æ³¨é‡Š
5. å®šæœŸé‡æ„ï¼Œä¿æŒä»£ç æ•´æ´
6. ç¼–å†™å•å…ƒæµ‹è¯•ç¡®ä¿ä»£ç è´¨é‡
7. ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å¼‚æ­¥ä»»åŠ¡
8. åˆç†ä½¿ç”¨ç¼“å­˜æå‡æ€§èƒ½
9. æ³¨æ„é˜²æ­¢ SQL æ³¨å…¥å’Œ XSS æ”»å‡»
10. éµå¾ª RESTful API è®¾è®¡è§„èŒƒ
11. **ğŸš€ é¡¹ç›®éƒ¨ç½²ï¼šä»£ç ä¿®æ”¹å®Œæˆåï¼Œå¼€å‘è€…ä¼šæ‰‹åŠ¨é‡æ–°å¯åŠ¨ Spring Boot é¡¹ç›®ï¼Œæ— éœ€ AI ååŠ©ç¼–è¯‘æˆ–è¿è¡Œ**
