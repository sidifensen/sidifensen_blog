# ========================================
# Gitea 环境变量配置示例
# ========================================
# 复制此文件为 .env 并修改相应配置
# cp env.example .env

# ========================================
# Gitea 服务器配置
# ========================================
# Gitea 服务器域名或 IP 地址
GITEA_DOMAIN=your-server-ip

# Gitea HTTP 端口（默认 3000）
# 安全建议：修改为非标准端口（如 30001），降低被扫描风险
GITEA_PORT=3000

# Gitea SSH 端口（默认 2222）
# 安全建议：修改为非标准端口（如 22222），降低被扫描风险
GITEA_SSH_PORT=2222

# ========================================
# Gitea 数据库配置
# ========================================
# 数据库类型：mysql 或 sqlite3（默认 sqlite3）
# 推荐使用 MySQL 以获得更好的性能和可扩展性
GITEA_DB_TYPE=mysql

# MySQL 数据库主机地址
# 使用容器名（推荐）：sidifensen-mysql
# 注意：确保 MySQL 容器和 Gitea 容器在同一个 Docker 网络（sidifensen-network）中
# 如果 MySQL 在其他位置，可以使用服务器 IP 或 host.docker.internal
GITEA_DB_HOST=sidifensen-mysql

# MySQL 数据库名称（Gitea 会使用此数据库）
GITEA_DB_NAME=gitea

# MySQL 数据库用户名
# ⚠️ 安全建议：不要使用 root 用户！
# 应该创建一个专门的 gitea 用户，只授予 gitea 数据库的权限
# 创建用户 SQL 命令（在 MySQL 中执行）：
#   CREATE USER 'gitea'@'%' IDENTIFIED BY 'your_strong_password';
#   CREATE DATABASE IF NOT EXISTS gitea CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
#   GRANT ALL PRIVILEGES ON gitea.* TO 'gitea'@'%';
#   FLUSH PRIVILEGES;
# 如果使用现有的 sidifensen 用户，确保该用户对 gitea 数据库有权限
GITEA_DB_USER=gitea

# MySQL 数据库密码
# 使用强密码，不要使用默认密码
GITEA_DB_PASSWORD=your_strong_password_here

# MySQL 数据库端口
# 注意：使用容器名连接时，这里填写的是 MySQL 容器内部的端口（3306）
# 不是宿主机映射的端口！MySQL 容器内部始终监听 3306 端口
# 即使宿主机映射的是其他端口（如 3307），这里仍然填写 3306
GITEA_DB_PORT=3306

# ========================================
# Gitea 应用配置
# ========================================
# 站点名称（显示在页面标题）
GITEA_APP_NAME=斯蒂芬森

# 仓库根目录（所有 Git 仓库存储位置）
GITEA_REPOSITORY_ROOT=/data/git/repositories

# LFS 根目录（Git LFS 文件存储位置，留空禁用 LFS）
GITEA_LFS_PATH=/data/git/lfs

# 日志路径
GITEA_LOG_PATH=/data/gitea/log

# ========================================
# Gitea 服务配置
# ========================================
# 是否禁用公开注册（true=禁用，false=允许）
# ⚠️ 重要：初始化时必须设置为 false（允许注册），否则无法创建管理员账户
# 初始化完成后，可以在 Gitea 管理界面（管理后台 → 配置 → 服务）中禁用注册
GITEA_DISABLE_REGISTRATION=false

# 是否启用验证码（true=启用，false=禁用）
GITEA_ENABLE_CAPTCHA=false

# ========================================
# Jenkins 容器部署配置
# ========================================
# Jenkins 容器名称（与 jenkins-setup.sh 中 CONTAINER_NAME 对应）
CONTAINER_NAME=jenkins

# Jenkins 数据目录（与 jenkins-setup.sh 中 JENKINS_HOME 对应）
JENKINS_HOME=/opt/jenkins_home

# Jenkins Web 端口映射（宿主机端口:容器8080）
HTTP_PORT=8080

# Jenkins Agent 端口映射（宿主机端口:容器50000）
AGENT_PORT=50000

# Jenkins 镜像版本，可替换为 jenkins/jenkins:lts-jdk21 等
JENKINS_IMAGE=jenkins/jenkins:lts

